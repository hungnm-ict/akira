<button ng-click="removeLife()" id="sublife" style="display:none;"></button>
<button ng-click="check()" id="check" style="display:none;"></button>
<div id="connectWizard" class="kana swMain">
    <!-- Life wrapper -->
    <akrlife progress="{{step/5*100}}" life="{{gameObject.life}}"></akrlife>

    <div class="stepContainer">
        <div class="content">
            <div class="wrapper">
                <div class="question-wrapper">
                    <div class="row">
                        <div class="col-md-4 col-md-offset-2">
                            <div class="row akrdomshuffle " ng-repeat="value in data | limitTo:5">
                                <div class="col-md-12 hira-wrapper f-right">
                                    <span id="hira-{{value.id}}" class="couple-{{value.id}}" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" ng-bind="value.hiragana">
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="row akrdomshuffle" ng-repeat="value in data | limitTo:5">
                                <div class="col-md-12 vi-wrapper">
                                    <span id="vie-{{value.id}}" class="couple-{{value.id}}" ondrop="drop(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)" ng-bind="value.romaji">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="aki-answer-wrapper"></div>
            </div>
        </div>
    </div>
</div>
<script>
function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev) {
    ev.dataTransfer.setData("text/html", ev.target.id);
}

function drop(ev) {

    if (($('#' + ev.dataTransfer.getData("text/html")).attr('class') === $(ev.target).attr('class')) && ($('#' + ev.dataTransfer.getData("text/html")).attr('id') != $(ev.target).attr('id'))) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text/html");
        ev.target.style.visibility = "hidden";
        document.getElementById(data).style.visibility = "hidden";
        $("#check").trigger("click");
        playCorrect();
    } else if ($('#' + ev.dataTransfer.getData("text/html")).attr('id')[0] === $(ev.target).attr('id')[0] || $('#' + ev.dataTransfer.getData("text/html")).attr('id') == "undefined") {; //do nothing
    } else {
        playFail();
        $("#sublife").trigger("click");
    }
}
changeLang();
</script>

var kanaApp=angular.module("totaln5App",["ngRoute","kanaCtrls","commonCtrls","akrSharedDirectives","akrUtilService"]);kanaApp.config(["$routeProvider",function(e){e.when("/",{templateUrl:function(){return"main.html"},controller:"mainCtrl",resolve:{kanaStar:function(e,t){var n=e.defer();return n.resolve(t.getRestPromise("kana")),n.promise}}}).when("/:lessonId",{controller:"subCtrl",templateUrl:function(e){return 1==e.lessonId||2==e.lessonId?"../kana/hirasub.html":3==e.lessonId||4==e.lessonId?"../kana/katasub.html":void 0},resolve:{kanaStar:function(e,t){var n=e.defer();return n.resolve(t.getRestPromise("kana")),n.promise}}}).when("/:lessonId/:partId/learn",{templateUrl:"learn.html",controller:"kanaLearnCtrl"}).when("/:lessonId/:partId/picture",{templateUrl:"picture.html",controller:"kanaPictureCtrl"}).when("/:lessonId/:partId/word",{templateUrl:"word.html",controller:"kanaWordCtrl"}).when("/:lessonId/:partId/connect",{templateUrl:"connect.html",controller:"kanaConnectCtrl"}).when("/:lessonId/:partId/write",{templateUrl:"write.html",controller:"kanaWriteCtrl"}).otherwise({redirectTo:"/"})}]),kanaApp.service("dataService",function(e){this.kana1=e({method:"GET",url:"../../data/kana/json/kana_1.json"}),this.kana2=e({method:"GET",url:"../../data/kana/json/kana_2.json"}),this.filter=function(e,t,n,a,r){var o=[];return $.each(e,function(l){e[l][t]==n&&e[l][a]==r&&o.push(e[l])}),o},this.getDataPromise=function(e,t){switch(e){case"kana":switch(t){case"1":case"3":return this.kana1;case"2":case"4":return this.kana2}break;default:return null}}}),kanaApp.service("restService",function(e){this.getRestPromise=function(t){switch(t){case"kana":return e({method:"GET",url:"http://akira.edu.vn/wp-content/plugins/akira-api/akira_star.php?course=kana&userid="+getUser().id});default:return null}}}),kanaApp.controller("rootController",function(e,t,n,a,r,o,l){e.rootPlay=function(e,t,n,a){try{{var r="choices-"+n+"-"+a;document.getElementById(r).getElementsByTagName("source")}$("audio#"+r+" source").attr("src","../../data/"+t+"/audio/"+e[n][a].filename+".mp3"),document.getElementById(r).load(),document.getElementById(r).play()}catch(o){console.error(o)}},e.$on("$routeChangeStart",function(){e.isLoading="true"}),e.$on("$routeChangeSuccess",function(){e.isLoading="false"}),e.$on("$locationChangeStart",function(e){l.isAuth()?l.hasViewAuth()||(e.preventDefault(),window.location.href="/akira/view/total"):window.location.href="/"})}),kanaApp.factory("menuFactory",function(){var e=0,t=0,n={navgroup:e,nav:t};return n});